# 开发环境配置
server:
  port: 9090
  servlet:
    # 应用的访问路径
    context-path: /
  tomcat:
    # tomcat的URI编码
    uri-encoding: UTF-8
    # 连接数满后的排队数，默认为100
    accept-count: 1000
    threads:
      # tomcat最大线程数，默认为200
      max: 800
      # Tomcat启动初始化的线程数，默认值10
      min-spare: 100

# 日志配置
logging:
  level:
    com.miaomiao: debug
    org.springframework: warn
    com.miaomiao.assistant.mapper: warn
    com.baomidou.mybatisplus: warn
    org.mybatis: warn

# Spring配置
spring:
  # Jackson配置
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      write-dates-as-timestamps: false
  # 文件上传
  servlet:
    multipart:
      # 单个文件大小
      max-file-size: 10MB
      # 设置总上传的文件大小
      max-request-size: 20MB

# AI服务统一配置
ai:
  providers:
    # 智谱AI
    zhipu:
      enabled: true
      apiKey: ${CHATGLM_API_KEY}
      enableTokenCache: true
      tokenExpire: 3600000
      # ASR模型
      asr-models:
        - glm-asr-2512
      # LLM模型
      llm-models:
        - glm-4.5
        - glm-4.6
        - glm-4.7
        - glm-4.7-flash
      # TTS模型
      tts-models:
        - glm-tts
    # 智谱AI Coding专用
#    zhipu-coding:
#      enabled: true
#      apiKey: ${CHATGLM_API_KEY}
#      baseUrl: https://open.bigmodel.cn/api/coding/paas/v4/chat/completions
#      enableTokenCache: true
#      tokenExpire: 3600000
#      llm-models:
#        - glm-4.7

# Native库配置
# Native库文件夹路径
# 文件夹下应包含 opus-jni-native.dll 或 libopus-jni-native.so
# 留空则自动检测：优先从工作目录的native文件夹加载，其次从系统库路径加载
native:
  opus:
    library-dir: D:/myworkspace/meow/meow-server/native

# TTS配置
tts:
  concurrent:
    # 是否启用并发TTS模式（多线程并发调用TTS API，有序播放）
    # 启用后可显著降低LLM快速返回时的整体延迟
    enabled: true
    # 最大并发数（建议2-4，过高可能导致TTS服务限流）
    max-concurrency: 3
